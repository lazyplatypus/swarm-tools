# Bun configuration for opencode-swarm-plugin
# See: https://bun.sh/docs/runtime/bunfig

[test]
# Only scan src/ for tests - evals/ uses evalite runner, not bun test
root = "src"

# Default timeout for tests
timeout = 10000

# Preload scripts (if needed)
# preload = ["./test-setup.ts"]

# NOTE: Some tests fail when run in full suite but pass individually.
# This is due to Bun's mock.module() not isolating between test files.
# Tests using mock.module() for ./hive, ./logger, swarm-mail will have
# their mocks overwritten by earlier tests in the suite.
#
# Known affected tests (run individually to verify they pass):
# - src/compaction-hook.test.ts
# - src/compaction-capture.integration.test.ts
# - src/tool-adapter.integration.test.ts (vitest, runs with bun)
#
# Long-term fix: migrate to vitest for proper test isolation, or
# restructure tests to use dependency injection instead of module mocks.
